<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script defer src="/cdn/pathLoader.js"></script>
    <script defer src="/cdn/clientScripts/studentDashboard.js"></script>
    <script defer src="/cdn/clientScripts/calendarControl.js"></script>
    
</head>
<!-- modal for selecting the lecturer -->
<body>
    <div class="modal fade" id="createEventModal" tabindex="-1" aria-labelledby="createEventModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createEventModalLabel">Join Consultation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="eventLecturer" class="form-label">Lecturer</label>
                            <select class="form-select" id="eventLecturer">
                                <option value="">Select lecturer</option>
                                <option value="Software">S. Levitt</option>
                                <option value="Measurements">AK Mohamed</option>
                                <option value="Big data">T. Celik</option>
                            </select>
                        </div>
                        <!-- <div class="mb-3">
                            <label for="eventTime" class="form-label">Event Time</label>
                            <select class="form-select" id="eventTime">
                                Available event times for the selected date must be displayed here. If max number of students already at capacity, do not display -->
                                <!-- <option value="">Select consultation</option>
                                <option value="09:00">09:00 AM with S. Levitt</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="11:00">11:00 AM</option>
                            </select>
                        </div> -->
                        
                        <button type="submit" class="btn btn-primary">Select</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Test script -->
    

    <div class="modal fade" id="TableModal" tabindex="-1" aria-labelledby="createEventModalTable"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createEventModalTable">Join Consultation Event</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <div class="table-responsive">
                                <table class="table table-striped" id="eventTable">
                                    <thead>
                                        <tr>
                                            <th>Lecturer</th>
                                            <th>Time</th>
                                            <th>Spaces Available</th>
                                            <th>Join</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody">
                                        <!-- Table rows will be dynamically generated here -->
                                        <script>
                                            // Sample data array
                                            const dataArray = [
                                                { column1: 'Value 1', column2: 'Value 2', column3: 'Value 3' },
                                                { column1: 'Value 4', column2: 'Value 5', column3: 'Value 6' }
                                            ];
                                        
                                            // Function to create and populate the table
                                            function createTable(data) {
                                                const tableBody = document.getElementById('tableBody');
                                        
                                                // Clear existing table rows
                                                tableBody.innerHTML = '';
                                        
                                                // Create new table rows
                                                data.forEach((rowObj, index) => {
                                                    const row = document.createElement('tr');
                                                    Object.values(rowObj).forEach(value => {
                                                        const cell = document.createElement('td');
                                                        cell.textContent = value;
                                                        row.appendChild(cell);
                                                    });
                                                
                                                // Create the "Join" button for the 4th column
                                                    const joinButtonCell = document.createElement('td');
                                                    const joinButton = document.createElement('button');
                                                    joinButton.textContent = 'Join';
                                                    joinButton.classList.add('btn', 'btn-primary');
                                                    joinButtonCell.appendChild(joinButton);
                                                    row.appendChild(joinButtonCell);
                                        
                                                    // Add click event listener to highlight selected row
                                                    row.addEventListener('click', () => {
                                                        const selectedRows = document.querySelectorAll('.selected-row');
                                                        selectedRows.forEach(row => row.classList.remove('selected-row'));
                                                        row.classList.add('selected-row');
                                                    });
                                        
                                                    tableBody.appendChild(row);
                                                });
                                            }
                                        
                                            // Call the function to create the table with the sample data
                                            createTable(dataArray);
                                        </script>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container my-5" id="greeting">
        <h1 class="my-4">Student Dashboard</h1>
    </div>

    <div class="card">
        <div class="container">
            <h1>Calendar</h1>
            <div class="text-center mb-1">
                <button id="todayBtn" class="btn btn-primary mr-2">Today</button>
            </div>
            <div class="text-center mb-3">
                <button id="prevMonthBtn" class="btn btn-primary mr-2">&lt; Prev Month</button>
                <span id="currentMonth"></span>
                <button id="nextMonthBtn" class="btn btn-primary ml-2">Next Month &gt;</button>
            </div>
            <div class="card">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Sun</th>
                            <th>Mon</th>
                            <th>Tue</th>
                            <th>Wed</th>
                            <th>Thu</th>
                            <th>Fri</th>
                            <th>Sat</th>
                        </tr>
                    </thead>
                    <tbody id="calendarBody">
                        <!-- Calendar body will be dynamically generated here -->
                    </tbody>
                </table>
            </div>
        </div>

    </div>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createEventModal">
        Select Lecturer
    </button>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#TableModal">
        Join Consultation
    </button>
    <script defer src="../cdn/clientScripts/calendarControl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>

</html>